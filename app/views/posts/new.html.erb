<div class="main posts-new">
  <div class="container">
    <h1 class="form-heading">投稿する</h1>

    <!-- form_tagメソッドを用いて、データの送信先URLを指定している -->
    <%= form_tag("/posts/create") do %>
      <div class="form">
        <div class="form-body">
        <!-- エラーが表示されるようにsaveメソッドが失敗したときにでるerrors.full_messagesの配列をeach文で回して表示している -->
        <% @post.errors.full_messages.each do |message| %>
          <div class="form-error">
            <%= message %>
          </div>
        <% end %>


        <!-- カテゴリーを選択するためのセレクトボックスを作成 -->
        <select name="category_id">
          <option value="">カテゴリーを選択してください</option>
          <!-- カテゴリーの一覧を取得し、each文で回してoptionタグを作成している -->
          <% @categories.each do |category| %>
            <option value="<%= category.id %>"><%= category.name %></option>
          <% end %>
        </select>

        <!-- 下２行で投稿フォームを作成 -->
          <textarea name = "content"><%= @post.content %></textarea>
          <!-- 匿名投稿のチェックボックスを作成 -->
          <input type="checkbox" name="is_anonymous" value="1">匿名投稿
          <input type="submit" value="投稿">
        </div>
      </div>
    
    <% end %>
  </div>
</div>